<mat-form-field appearance="fill">
  <mat-label>Категории</mat-label>
  <mat-select [formControl]="categoryCtrl" multiple>
    <mat-select-trigger>
      {{categoryCtrl.value ? categoryCtrl.value[0]: ''}}
      <span *ngIf="categoryCtrl.value?.length > 1" class="additional-selection">
        (+{{categoryCtrl.value.length - 1}} {{categoryCtrl.value?.length === 2 ? 'other' : 'others'}})
      </span>
    </mat-select-trigger>
    <mat-option *ngFor="let category of categories" [value]="category.name">{{category.name}}</mat-option>
  </mat-select>
</mat-form-field>

<button mat-flat-button color="primary" (click)="findProduct()">Найти</button>
    <table
      mat-table
      [dataSource]="products"
      class="table table-self"
      *ngIf="products.length > 0"
    >
      <ng-container matColumnDef="name">
        <th *matHeaderCellDef mat-header-cell class="cell">Название</th>
        <td *matCellDef="let row" mat-cell class="cell">{{ _product(row).name }}</td>
      </ng-container>

      <ng-container matColumnDef="price">
        <th *matHeaderCellDef mat-header-cell class="cell">Цена</th>
        <td *matCellDef="let row" mat-cell class="cell">{{ _product(row).price }}</td>
      </ng-container>

      <ng-container matColumnDef="function">
        <th mat-header-cell *matHeaderCellDef class="cell">Выбрать</th>
        <td mat-cell *matCellDef="let row" class="cell">
          <button mat-button [mat-dialog-close]="_product(row)" class="btn btn-small btn-self-dialog">Выбрать</button>
        </td>
      </ng-container>

      <tr *matHeaderRowDef="columns" mat-header-row></tr>
      <tr *matRowDef="let row; columns: columns" mat-row></tr>
    </table>
<mat-paginator *ngIf="products.length > 0" [length]="resultsLength" [pageSize]="pageSize"></mat-paginator>
